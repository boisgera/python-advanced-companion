<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Fonctions</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="css/style.css" />
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <!--
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet"> 
  -->

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap" rel="stylesheet"> 
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap" rel="stylesheet">
  <script>
      document.addEventListener("DOMContentLoaded", (event) => {
          let h3 = document.createElement("h3");
          h3.innerHTML = "Plan du site";
          let toc = document.getElementById("TOC");
          toc.prepend(h3);
      });    
  </script>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Fonctions</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#fonctions">Fonctions</a>
<ul>
<li><a href="#définitions">Définitions</a></li>
<li><a href="#valeurs-de-retour">Valeurs de retour</a></li>
<li><a href="#espaces-de-nom">Espaces de nom</a></li>
</ul></li>
<li><a href="#invocables">Invocables</a>
<ul>
<li><a href="#classes">Classes</a></li>
<li><a href="#méthodes">Méthodes</a></li>
<li><a href="#custom-classes">Custom classes</a></li>
</ul></li>
<li><a href="#fonctions-génératrices">Fonctions génératrices</a></li>
<li><a href="#higher-order-programming">Higher-order Programming</a>
<ul>
<li><a href="#usages">Usages</a></li>
<li><a href="#décorateurs">Décorateurs</a></li>
<li><a href="#lambda">Lambda</a></li>
<li><a href="#closures">Closures</a></li>
</ul></li>
</ul>
</nav>
<h2 id="fonctions">Fonctions</h2>
<h3 id="définitions">Définitions</h3>
<p><code>def</code> <code>return</code>, retour réifiés (tuple), arguments positionnels ou nommés, arguments par défaut.</p>
<pre class="python"><code>def f(x, y, z=0):
    print(&quot;Please !&quot;)
    return 42</code></pre>
<h3 id="valeurs-de-retour">Valeurs de retour</h3>
<p><span class="math display">\[
\int_0^1 f(x) \, dx
\]</span></p>
<h3 id="espaces-de-nom">Espaces de nom</h3>
<p>Portée / scope</p>
<p>🇺🇸 → Namespace</p>
<p>(implicites)</p>
<p>globals / locals (builtin module, read-only, etc.)</p>
<h2 id="invocables">Invocables</h2>
<p>🇫🇷 invocable (ou appelable) → 🇺🇸 callable (or “function-like”)</p>
<p>On qualifie d’invocable tout objet se comportant comme une fonction, c’est-à-dire pouvant être appelé (invoqué) avec la même syntaxe que les fonctions.</p>
<p>Ainsi, l’entier <code>0</code> n’est pas invocable :</p>
<pre class="pycon"><code>&gt;&gt;&gt; zero = 0
&gt;&gt;&gt; zero()
TypeError: &#39;int&#39; object is not callable</code></pre>
<p>La fonction sans argument qui renvoie <code>0</code> est invocable :</p>
<pre class="pycon"><code>&gt;&gt;&gt; def zero_fun():
...     return 0
&gt;&gt;&gt; zero_fun()
0</code></pre>
<p>ce qui n’est pas une surprise puisque c’est une fonction !</p>
<pre class="pycon"><code>&gt;&gt;&gt; type(zero_fun)
&lt;class &#39;function&#39;&gt;
&gt;&gt;&gt; import types
&gt;&gt;&gt; isinstance(zero_fun, types.FunctionType)
True</code></pre>
<p>L’objet <code>int</code> est également invocable :</p>
<pre class="pycon"><code>&gt;&gt;&gt; int()
0</code></pre>
<p>Pourtant, ce n’est pas une function, mais un type (c’est-à-dire une classe) :</p>
<pre class="pycon"><code>&gt;&gt;&gt; type(int)
&lt;class &#39;type&#39;&gt;
&gt;&gt;&gt; type(int) is type
True
&gt;&gt;&gt; isinstance(int, types.FunctionType)
False</code></pre>
<p>L’invocabilité des objets Python peut être testée avec la fonction <code>callable</code> :</p>
<pre class="pycon"><code>&gt;&gt;&gt; callable(zero)
False
&gt;&gt;&gt; callable(zero_fun)
True
&gt;&gt;&gt; callable(int)
True</code></pre>
<p>Notons que ce test permet de dire si un objet est invocable, mais pas si on peut l’invoquer sans arguments (ni combien d’arguments sont nécessaires, de quel type, etc.). Ainsi :</p>
<pre class="pycon"><code>&gt;&gt;&gt; callable(hash)
True</code></pre>
<p>Mais</p>
<pre class="pycon"><code>&gt;&gt;&gt; hash()
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: hash() takes exactly one argument (0 given)</code></pre>
<p>Toutefois</p>
<pre class="pycon"><code>&gt;&gt;&gt; hash(2**100)
549755813888</code></pre>
<p>Pour en savoir plus sur les arguments attendus, il faudra se reporter à la documentation de l’objet considéré.</p>
<h3 id="classes">Classes</h3>
<p>Des fois difficile de distinguer classes de fonction (ex: <code>np.array</code>) ; factories, etc.</p>
<h3 id="méthodes">Méthodes</h3>
<h3 id="custom-classes">Custom classes</h3>
<p><code>__call__</code></p>
<h2 id="fonctions-génératrices">Fonctions génératrices</h2>
<h2 id="higher-order-programming">Higher-order Programming</h2>
<p>Fonctions comme “valeurs” ; lambda, decorateurs ; patterns d’usage: math (ODEs, autograd), filters/maps, callbacks, etc.</p>
<h3 id="usages">Usages</h3>
<h3 id="décorateurs">Décorateurs</h3>
<h3 id="lambda">Lambda</h3>
<h3 id="closures">Closures</h3>
<hr />
<pre class="pycon"><code>test ligatures: -&gt;</code></pre>
</body>
</html>
